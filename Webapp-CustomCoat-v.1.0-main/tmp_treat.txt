  function treatPlant(slotIndex){
    const plant = state.plants.find(p => p.slot === slotIndex);
    if(!plant || !plant.pest){ showToast('Keine SchÃ¤dlinge vorhanden.'); return; }
    ensureConsumables();
    const type = plant.pest.id;
    if(type === 'mold'){
      if(state.consumables.fungicide > 0){
        state.consumables.fungicide -= 1;
        plant.pest = null;
        spawnBurst(slotIndex, 'ðŸ›¡ï¸', 6);
      } else { showToast('Fungizid benÃ¶tigt.'); return; }
    } else if(type === 'mites' || type === 'thrips'){
      if(state.consumables.spray > 0){
        state.consumables.spray -= 1;
        plant.pest = null;
        spawnBurst(slotIndex, 'ðŸ›¡ï¸', 6);
      } else if(state.consumables.beneficials > 0){
        state.consumables.beneficials -= 1;
        plant.pest = null;
        spawnBurst(slotIndex, 'ðŸª²', 6);
      } else { showToast('Keine Abwehr vorhanden.'); return; }
    }
    updateProgressBars();
    renderConsumables();
    save();
  }

  function firstEmptySlot(){
